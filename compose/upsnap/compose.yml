version: "3"
services:
  upsnap:
    image: ghcr.io/seriousm4x/upsnap:4
    restart: unless-stopped
    network_mode: host
    user: 1000:1000
    volumes:
      - ${UPSNAP_HOME}/data:/app/pb_data
    environment:
       TZ: $UPSNAP_TZ
       UPSNAP_PING_PRIVILEGED: false
    labels:
      traefik.enable: true
      traefik.http.services.upsnap.loadbalancer.server.port: 8090
      traefik.http.routers.upsnap.rule: Host(`$UPSNAP_HOST`)
      traefik.http.routers.upsnap.entrypoints: https
      traefik.http.routers.upsnap.middlewares: local-whitelist